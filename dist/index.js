var _=document.getElementById("modal"),U=document.getElementById("close"),R=document.getElementById("help"),M=document.getElementById("search"),Q=document.getElementById("visible-count");function S(){return new URLSearchParams(window.location.search)}function k(j){let q=S();for(let[G,J]of Object.entries(j))if(J)q.set(G,J);else q.delete(G);let A=q.toString()?`${window.location.pathname}?${q.toString()}`:window.location.pathname;window.history.pushState({},"",A)}function F(j){return(j.textContent?.trim().toLowerCase()||"").replace(/↑|↓/g,"").trim().split(/\s+/).slice(0,2).join("-")}function v(j){let q=document.querySelectorAll("th.sortable");return Array.from(q).findIndex((A)=>F(A)===j)}var f=0;R.addEventListener("click",()=>{f=window.scrollY,document.body.style.position="fixed",document.body.style.top=`-${f}px`,_.showModal()});function E(){_.close(),document.body.style.position="",document.body.style.top="",window.scrollTo(0,f)}U.addEventListener("click",E);_.addEventListener("cancel",E);_.addEventListener("click",(j)=>{if(j.target===_)E()});var z={column:-1,direction:"asc"};function L(j,q){let A=document.querySelectorAll("th.sortable"),G=A[j],J=G.getAttribute("data-type");if(!J)return;let B=document.querySelectorAll("th"),W=Array.from(B).indexOf(G);z={column:j,direction:q},k({sort:F(G),order:q});let O=document.querySelector("table tbody"),$=Array.from(O.querySelectorAll("tr"));$.sort((X,H)=>{let K=D(X.cells[W],J),Y=D(H.cells[W],J);if(K===void 0&&Y===void 0)return 0;if(K===void 0)return 1;if(Y===void 0)return-1;let Z=0;if(J==="number")Z=K-Y;else if(J==="boolean")Z=K.localeCompare(Y);else Z=K.localeCompare(Y);return q==="asc"?Z:-Z}),$.forEach((X)=>O.appendChild(X)),A.forEach((X,H)=>{let K=X.querySelector(".sort-indicator");if(H===j)K.textContent=q==="asc"?"↑":"↓";else K.textContent=""})}function D(j,q){let A=j.textContent?.trim()||"";if(A==="-")return;if(q==="number")return parseFloat(A.replace(/[$,]/g,""))||0;return A.toLowerCase()}document.querySelectorAll("th.sortable").forEach((j,q)=>{j.addEventListener("click",()=>{let A=z.column===q&&z.direction==="asc"?"desc":"asc";L(q,A)})});function N(j){let q=j.toLowerCase().split(",").filter((J)=>J.trim()!==""),A=document.querySelectorAll("table tbody tr"),G=0;A.forEach((J)=>{let B=Array.from(J.cells).map((O)=>O.textContent.toLowerCase()),W=q.length===0||q.some((O)=>B.some(($)=>$.includes(O.trim())));if(J.style.display=W?"":"none",W)G++}),Q.textContent=G.toString(),k({search:j||null})}M.addEventListener("input",()=>{N(M.value)});document.addEventListener("keydown",(j)=>{if((j.metaKey||j.ctrlKey)&&j.key==="k")j.preventDefault(),M.focus()});M.addEventListener("keydown",(j)=>{if(j.key==="Escape")M.value="",M.dispatchEvent(new Event("input")),M.blur()});window.copyDomain=async(j,q)=>{try{if(navigator.clipboard){await navigator.clipboard.writeText(q);let A=j.querySelector(".copy-icon"),G=j.querySelector(".check-icon");A.style.display="none",G.style.display="block",j.classList.add("copied"),setTimeout(()=>{A.style.display="block",G.style.display="none",j.classList.remove("copied")},1000)}}catch(A){console.error("Failed to copy text: ",A)}};document.querySelectorAll(".fallback-icon").forEach((j)=>{j.style.display="none"});function P(){let j=S();(()=>{let q=j.get("search");if(!q)return;M.value=q,N(q)})(),(()=>{let q=j.get("sort");if(!q)return;let A=v(q);if(A===-1)return;let G=j.get("order")||"asc";L(A,G)})()}document.addEventListener("DOMContentLoaded",P);window.addEventListener("popstate",P);
